---
import {Image} from 'astro:assets';

const {images} = Astro.props;

interface ImageData {
    category?: string;

    [key: string]: any;
}

interface ImageI {
    data: ImageData;
}

type ImagesByCategory = {
    [category: string]: ImageI[];
};

const imagesByCategory: ImagesByCategory = images.reduce((acc, image) => {
    const category = image.data.category || 'Uncategorized';

    if (!acc[category]) {
        acc[category] = [];
    }
    acc[category].push(image);
    return acc;
}, {});
---

<div class="w-full overflow-y-auto h-full">
    {Object.entries(imagesByCategory).map(([category, images]) => (
            <div class="grid grid-cols-2 gap-4 lg:grid-cols-3 max-w-5xl">
                {images.map((image) => (
                        <Image src={image.data.image} alt="" oncontextmenu="return false;"/>
                ))}
            </div>

            <hr class="my-8 border-t-2 border-gray-100"/>
    ))}
</div>
